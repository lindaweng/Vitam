<!DOCTYPE html>
<html lang="en">

  <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">.swal-icon--error{border-color:#f27474;-webkit-animation:animateErrorIcon .5s;animation:animateErrorIcon .5s}.swal-icon--error__x-mark{position:relative;display:block;-webkit-animation:animateXMark .5s;animation:animateXMark .5s}.swal-icon--error__line{position:absolute;height:5px;width:47px;background-color:#f27474;display:block;top:37px;border-radius:2px}.swal-icon--error__line--left{-webkit-transform:rotate(45deg);transform:rotate(45deg);left:17px}.swal-icon--error__line--right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:16px}@-webkit-keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@-webkit-keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}@keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}.swal-icon--warning{border-color:#f8bb86;-webkit-animation:pulseWarning .75s infinite alternate;animation:pulseWarning .75s infinite alternate}.swal-icon--warning__body{width:5px;height:47px;top:10px;border-radius:2px;margin-left:-2px}.swal-icon--warning__body,.swal-icon--warning__dot{position:absolute;left:50%;background-color:#f8bb86}.swal-icon--warning__dot{width:7px;height:7px;border-radius:50%;margin-left:-4px;bottom:-11px}@-webkit-keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}@keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}.swal-icon--success{border-color:#a5dc86}.swal-icon--success:after,.swal-icon--success:before{content:"";border-radius:50%;position:absolute;width:60px;height:120px;background:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal-icon--success:before{border-radius:120px 0 0 120px;top:-7px;left:-33px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:60px 60px;transform-origin:60px 60px}.swal-icon--success:after{border-radius:0 120px 120px 0;top:-11px;left:30px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 60px;transform-origin:0 60px;-webkit-animation:rotatePlaceholder 4.25s ease-in;animation:rotatePlaceholder 4.25s ease-in}.swal-icon--success__ring{width:80px;height:80px;border:4px solid hsla(98,55%,69%,.2);border-radius:50%;box-sizing:content-box;position:absolute;left:-4px;top:-4px;z-index:2}.swal-icon--success__hide-corners{width:5px;height:90px;background-color:#fff;padding:1px;position:absolute;left:28px;top:8px;z-index:1;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal-icon--success__line{height:5px;background-color:#a5dc86;display:block;border-radius:2px;position:absolute;z-index:2}.swal-icon--success__line--tip{width:25px;left:14px;top:46px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-animation:animateSuccessTip .75s;animation:animateSuccessTip .75s}.swal-icon--success__line--long{width:47px;right:8px;top:38px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-animation:animateSuccessLong .75s;animation:animateSuccessLong .75s}@-webkit-keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@-webkit-keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}@keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}.swal-icon--info{border-color:#c9dae1}.swal-icon--info:before{width:5px;height:29px;bottom:17px;border-radius:2px;margin-left:-2px}.swal-icon--info:after,.swal-icon--info:before{content:"";position:absolute;left:50%;background-color:#c9dae1}.swal-icon--info:after{width:7px;height:7px;border-radius:50%;margin-left:-3px;top:19px}.swal-icon{width:80px;height:80px;border-width:4px;border-style:solid;border-radius:50%;padding:0;position:relative;box-sizing:content-box;margin:20px auto}.swal-icon:first-child{margin-top:32px}.swal-icon--custom{width:auto;height:auto;max-width:100%;border:none;border-radius:0}.swal-icon img{max-width:100%;max-height:100%}.swal-title{color:rgba(0,0,0,.65);font-weight:600;text-transform:none;position:relative;display:block;padding:13px 16px;font-size:27px;line-height:normal;text-align:center;margin-bottom:0}.swal-title:first-child{margin-top:26px}.swal-title:not(:first-child){padding-bottom:0}.swal-title:not(:last-child){margin-bottom:13px}.swal-text{font-size:16px;position:relative;float:none;line-height:normal;vertical-align:top;text-align:left;display:inline-block;margin:0;padding:0 10px;font-weight:400;color:rgba(0,0,0,.64);max-width:calc(100% - 20px);overflow-wrap:break-word;box-sizing:border-box}.swal-text:first-child{margin-top:45px}.swal-text:last-child{margin-bottom:45px}.swal-footer{text-align:right;padding-top:13px;margin-top:13px;padding:13px 16px;border-radius:inherit;border-top-left-radius:0;border-top-right-radius:0}.swal-button-container{margin:5px;display:inline-block;position:relative}.swal-button{background-color:#7cd1f9;color:#fff;border:none;box-shadow:none;border-radius:5px;font-weight:600;font-size:14px;padding:10px 24px;margin:0;cursor:pointer}.swal-button[not:disabled]:hover{background-color:#78cbf2}.swal-button:active{background-color:#70bce0}.swal-button:focus{outline:none;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(43,114,165,.29)}.swal-button[disabled]{opacity:.5;cursor:default}.swal-button::-moz-focus-inner{border:0}.swal-button--cancel{color:#555;background-color:#efefef}.swal-button--cancel[not:disabled]:hover{background-color:#e8e8e8}.swal-button--cancel:active{background-color:#d7d7d7}.swal-button--cancel:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(116,136,150,.29)}.swal-button--danger{background-color:#e64942}.swal-button--danger[not:disabled]:hover{background-color:#df4740}.swal-button--danger:active{background-color:#cf423b}.swal-button--danger:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(165,43,43,.29)}.swal-content{padding:0 20px;margin-top:20px;font-size:medium}.swal-content:last-child{margin-bottom:20px}.swal-content__input,.swal-content__textarea{-webkit-appearance:none;background-color:#fff;border:none;font-size:14px;display:block;box-sizing:border-box;width:100%;border:1px solid rgba(0,0,0,.14);padding:10px 13px;border-radius:2px;transition:border-color .2s}.swal-content__input:focus,.swal-content__textarea:focus{outline:none;border-color:#6db8ff}.swal-content__textarea{resize:vertical}.swal-button--loading{color:transparent}.swal-button--loading~.swal-button__loader{opacity:1}.swal-button__loader{position:absolute;height:auto;width:43px;z-index:2;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);text-align:center;pointer-events:none;opacity:0}.swal-button__loader div{display:inline-block;float:none;vertical-align:baseline;width:9px;height:9px;padding:0;border:none;margin:2px;opacity:.4;border-radius:7px;background-color:hsla(0,0%,100%,.9);transition:background .2s;-webkit-animation:swal-loading-anim 1s infinite;animation:swal-loading-anim 1s infinite}.swal-button__loader div:nth-child(3n+2){-webkit-animation-delay:.15s;animation-delay:.15s}.swal-button__loader div:nth-child(3n+3){-webkit-animation-delay:.3s;animation-delay:.3s}@-webkit-keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}@keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}.swal-overlay{position:fixed;top:0;bottom:0;left:0;right:0;text-align:center;font-size:0;overflow-y:auto;background-color:rgba(0,0,0,.4);z-index:10000;pointer-events:none;opacity:0;transition:opacity .3s}.swal-overlay:before{content:" ";display:inline-block;vertical-align:middle;height:100%}.swal-overlay--show-modal{opacity:1;pointer-events:auto}.swal-overlay--show-modal .swal-modal{opacity:1;pointer-events:auto;box-sizing:border-box;-webkit-animation:showSweetAlert .3s;animation:showSweetAlert .3s;will-change:transform}.swal-modal{width:478px;opacity:0;pointer-events:none;background-color:#fff;text-align:center;border-radius:5px;position:static;margin:20px auto;display:inline-block;vertical-align:middle;-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;z-index:10001;transition:opacity .2s,-webkit-transform .3s;transition:transform .3s,opacity .2s;transition:transform .3s,opacity .2s,-webkit-transform .3s}@media (max-width:500px){.swal-modal{width:calc(100% - 20px)}}@-webkit-keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}</style>
        
        <title>Messaging Template</title>
        <!--<link rel="stylesheet" type="text/css" href="css/style.css">-->
        <link rel="shortcut icon" href="../img/sprout.ico">
        <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>-->
        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130132342-2"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'UA-130132342-2');
        </script>

        
        <!--<link rel="stylesheet" href="css/style1.css">-->
    <style>
    .gotham-myfont {
        font-family: "Montserrat", sans-serif;
        font-weight: 100;
    }
    </style>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">


    <!-- Bootstrap core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Varela+Round|Tinos" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

    <!-- Custom styles for this template -->
    <!--<link rel="stylesheet" href="css/grayscale.min.css">-->
    <link rel="stylesheet" href="../css/style8.3.css">

    <!-- Google Custom Search -->
    <script async src="https://cse.google.com/cse.js?cx=017667718484856733925:y3adtepvf0n"></script>

    <!--
      <PageMap>
        <DataObject type="action">
          <Attribute name="label" value="Download"/>
          <Attribute name="url" value="http://www.scribd.com/document_downloads/20258723?extension=pdf"/>
          <Attribute name="class" value="download"/>
        </DataObject>

        <DataObject type="action">
          <Attribute name="label" value="Fullscreen View"/>
          <Attribute name="url" value="http://d1.scribdassets.com/ScribdViewer.swf?document_id=20258723&access_key=key-27lwdyi9z21ithon73g3&version=1&viewMode=fullscreen"/>
          <Attribute name="class" value="fullscreen"/>
        </DataObject>

        <DataObject type="action">
          <Attribute name="label" value="Download"/>
          <Attribute name="url" value="http://www.scribd.com/document_downloads/20258723?extension=pdf"/>
          <Attribute name="class" value="download"/>
        </DataObject>
      </PageMap>
    -->

</head>
  
  <body style="font-family: 'Tinos'" onload="openWords()">
    <!--lang="en-US" link="#0000ff" dir="LTR" data-gr-c-s-loaded="true" class =""-->

    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav" style="background: #8EE0FF; font-family: Nunito">
      <div class="container">
      <!-- <a class="navbar-brand" href="/account/<%=@id%>">Vitam</a> -->
      <img src="../img/logo.png" style="width:9.5%">
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="/account/<%=@id%>" style="padding: 0rem 1.5rem !important; font-size:2.5rem">My Account</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" onclick="openVideo()" id="useVid" style="padding: 0rem 1.5rem !important; font-size:2.5rem">Show Webcam</a>
          </li>
          <li class="nav-item">
            <a class="nav-link noshow" onclick="stopVideo()" id="stopVid" style="padding: 0rem 1.5rem !important; font-size:2.5rem">Stop Webcam</a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link" href="/" style="padding: 0rem 1.5rem !important">Log Out</a>
          </li> -->
        </ul>
      </div>
      </div>
    </nav>

<!-- Tutorial -->
    <%if @tut == 1%>
      <div class="modal show" style="background: rgb(128, 128, 128, 0.5); height:0" id="tut">
        <div class="tutorial template show" id="step-1" style="width: 60%; margin-top: 24%; margin-left: 9%">
          <div class="arrow template-arrow-up" style="margin-left: 47.5%; margin-top:-3.7%">
          </div>
          <h4>The square vocabulary buttons (the squares with a word or phrase and an  corresponding picture or just a word or a picture) can be selected to compose a custom message. The word or phrase on each square vocabulary button is pronounced when it is selected.</h4>
          <button class="btn my-btn" onclick="nextStep(1)">Next</button>
          
        </div>
        <div class="tutorial template noshow templates" id="step-2" style="margin-top: 24%">
          <div class="arrow template-arrow-up" style="margin-left: -5%;margin-top: -3.5%;transform: rotate(-45deg);border-width: 0 2rem 2rem;">
          </div>
          <div class="arrow template-arrow-up" style="margin-left: 97%;margin-top: -3.5%;transform: rotate(45deg);border-width: 0 2rem 2rem;">
          </div>
          <h4>The buttons on the right and left can be selected to add punctuation to the message.</h4>
          <button class="btn my-btn" onclick="backStep(2)">Back</button>
          <button class="btn my-btn" onclick="nextStep(2)">Next</button>
        </div>
        <div class="tutorial template noshow templates" id="step-3">
          <div class="arrow template-arrow-up" style="margin-left: -5%;margin-top: -3.5%;transform: rotate(-45deg);-webkit-transform: rotate(-45deg);border-width: 0 2rem 2rem;">
          </div>
          <div class="arrow template-arrow-up" style="margin-left: 97%;margin-top: -3.5%;transform: rotate(45deg);-webkit-transform: rotate(45deg);border-width: 0 2rem 2rem;">
          </div>
          <h4>The arrows on both sides moves to the next page of vocabulary squares. They loop back to the beginning and the end.</h4>
          <button class="btn my-btn" onclick="backStep(3)">Back</button>
          <button class="btn my-btn" onclick="nextStep(3)">Next</button>
        </div>
        <div class="tutorial template noshow templates" id="step-4" style="margin-left: 20%;margin-top: 48%;width: 30%;">
          <div class="arrow template-arrow-up" style="margin-left: -9%;margin-top: 0%;transform: rotate(-90deg);-webkit-transform: rotate(-90deg);">
          </div>
          <h4>The “Delete Word” button deletes one word at a time from the message.</h4>
          <button class="btn my-btn" onclick="backStep(4)">Back</button>
          <button class="btn my-btn" onclick="nextStep(4)">Next</button>
        </div>
        <div class="tutorial template noshow templates" id="step-5" style="margin-left: 20%;margin-top: 48%;width: 40%;">
          <div class="arrow template-arrow-up" style="margin-left: -7%;margin-top: 0%;transform: rotate(-90deg);-webkit-transform: rotate(-90deg);">
          </div>
          <h4>The “Say” button pronounces the entire message.</h4>
          <button class="btn my-btn" onclick="backStep(5)">Back</button>
          <button class="btn my-btn" onclick="nextStep(5)">Next</button>
        </div>
        <div class="tutorial template noshow templates" id="step-6" style="margin-left: 20%;margin-top: 48%;width: 40%;">
          <div class="arrow template-arrow-up" style="margin-left: -7%;margin-top: 0%;transform: rotate(-90deg);-webkit-transform: rotate(-90deg);">
          </div>
          <h4>The “Copy” button copies the message to the clipboard so that it can easily be “pasted” in an email, text message, etc.</h4>
          <button class="btn my-btn" onclick="backStep(6)">Back</button>
          <button class="btn my-btn" onclick="nextStep(6)">Next</button>
        </div>
        <div class="tutorial template noshow templates" id="step-7" style="margin-top: 48%">
          <div class="arrow template-arrow-up" style="margin-left: 47.5%; margin-top:-2.8%">
          </div>
          <h4>The “Edit Page” button allows the square vocabulary buttons to be edited. Click on it to continue with the tutorial.</h4>
          <button class="btn my-btn" onclick="backStep(7)">Back</button>
          <button class="btn my-btn" onclick="nextStep(7)">Next</button>
        </div>
        <div class="tutorial template noshow templates" id="step-8">
          <div class="arrow template-arrow-up" style="margin-left: 47.5%; margin-top:-2.75%">
          </div>
          <h4>There is a text box and a choose file button in each of the previous square vocabulary buttons. You can input a new phrase in each text box and select an picture from the device with each “Choose File” button. </h4>
          <button class="btn my-btn" onclick="backStep(8)">Back</button>
          <button class="btn my-btn" onclick="nextStep(8)">Next</button>
        </div>
        <div class="tutorial template noshow templates" id="step-9" style="margin-top: 47%;margin-left: 1%">
          <div class="arrow template-arrow-up" style="margin-left: 2%; margin-top:-2.8%">
          </div>
          <h4>The “Replace” button replaces the square vocabulary buttons previously on the page with the inputted phrases and their corresponding pictures. If a text box is left blank and if no picture is selected, the corresponding square vocabulary button previously on the page is left alone and not replaced.</h4>
          <button class="btn my-btn" onclick="backStep(9)">Back</button>
          <button class="btn my-btn" onclick="nextStep(9)">Next</button>
        </div>
        <div class="tutorial template noshow templates" id="step-10" style="margin-top: 47%;margin-left: 1%">
          <div class="arrow template-arrow-up" style="margin-left: 14%; margin-top:-2.8%">
          </div>
          <h4>The “Add” button adds the inputted words and pictures to the end of all of the current words and pictures.</h4>
          <button class="btn my-btn" onclick="backStep(10)">Back</button>
          <button class="btn my-btn" onclick="nextStep(10)">Next</button>
        </div>
        <div class="tutorial template noshow templates" id="step-11" style="margin-top: 47%;margin-left: 5%;width: 63%">
          <div class="arrow template-arrow-up" style="margin-left: 29%; margin-top:-3.5%">
          </div>
          <h4>The “Back to Template” button returns you to your current vocabulary squares.</h4>
          <button class="btn my-btn" onclick="backStep(11)">Back</button>
          <button class="btn my-btn" onclick="closeModal('tut')">Done</button>
        </div>
      </div>
    <%end%>
    

        <div class="video">
        <div id="tables">
        <!-- tableNum is how many tables are needed, so how many times this is looped. 16 is 8 words on a page, it's a 2x4 table -->
        <%@tableNum = @words.length / 16.0%>
        <%if @tableNum.to_i.to_f == @tableNum%>
          <%@tableNum = @tableNum.to_i%>
        <%else%>
          <%@tableNum = @tableNum.to_i + 1%>
        <%end%>
        <%@idName = "words"%>
        <%@wordNum = 0%>
        <%@pastId = "words0"%>
        <%@lastId = @idName + (@tableNum-1).to_s%>
        <%for i in (0..@tableNum-1)%>
        <%@idName = "words"%>
        <%@wordNum = i * 16%>
        <%@nextId = @idName + (i+1).to_s%>
        <%@idName = @idName + i.to_s%>
      
        <table id="<%=@idName%>" class="noshow email">
            <tr id="row">
              <td style="width:5%" class="noSpeak">
                <table class="double-row">
                  <tr>
                    <td class="top" onclick="noshow('', '', 'or');">
                      <p>or</p>
                    </td>
                  </tr>
                  <tr>
                    <td class="bottom" onclick="noshow('', '', '!');">
                      <p>!</p>
                    </td>
                  </tr>
                </table>
              </td>
              <td onclick="noshow('', '', '<%=jsEncode(@words[@wordNum])%>');">
                <p><%=@words[@wordNum]%></p>
                <img src="<%=@words[@wordNum+1]%>">
              </td>
              <!-- +2 is to account for the picture string that follows the word in the array -->
              <%@wordNum += 2%>
              <%if @wordNum == @words.length%>
                <!-- instead of breaking out of the for loop and cutting the table off, this just creates blank boxes and allows all of the table functions to appear -->
                <%@words[@wordNum] = ""%>
                <%@words[@wordNum+1] = ""%>
              <%end%>
              <td onclick="noshow('', '', '<%=jsEncode(@words[@wordNum])%>');">
                <p><%=@words[@wordNum]%></p>
                <img src="<%=@words[@wordNum+1]%>">
              </td>
              <%@wordNum += 2%>
              <%if @wordNum == @words.length%>
                <%@words[@wordNum] = ""%>
                <%@words[@wordNum+1] = ""%>
              <%end%>
              <td onclick="noshow('', '', '<%=jsEncode(@words[@wordNum])%>');">
                <p><%=@words[@wordNum]%></p>
                <img src="<%=@words[@wordNum+1]%>">
              </td>
              <%@wordNum += 2%>
              <%if @wordNum == @words.length%>
                <%@words[@wordNum] = ""%>
                <%@words[@wordNum+1] = ""%>
              <%end%>
              <td onclick="noshow('', '', '<%=jsEncode(@words[@wordNum])%>');">
                <p><%=@words[@wordNum]%></p>
                <img src="<%=@words[@wordNum+1]%>">
              </td>
              <%@wordNum += 2%>
              <%if @wordNum == @words.length%>
                <%@words[@wordNum] = ""%>
                <%@words[@wordNum+1] = ""%>
              <%end%>
              <td style="width:5%" class="noSpeak">
                <table class="double-row">
                  <tr>
                    <td class="top" onclick="noshow('', '', 'and');">
                      <p>&</p>
                    </td>
                  </tr>
                  <tr>
                    <td class="bottom" onclick="noshow('', '', ',');">
                      <p>,</p>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            <tr id="row">
              <td style="width:5%" class="noSpeak">
                <table class="double-row">
                  <tr>
                    <td class="top" onclick="noshow('', '', '?');"">
                      <p>?</p>
                    </td>
                  </tr>
                  <tr style="background: #75FB78">
                    <%if @idName == "words0"%>
                      <!-- It's the first table, left arrow needs to loop to the last table-->
                    <td class="bottom" onclick="noshow('<%=@idName%>', '<%=@lastId%>', '');">
                      <img src="../img/arrowLeft.png"/>
                    </td>
                    <%else%>
                    <td class="bottom" onclick="noshow('<%=@idName%>', '<%=@pastId%>', '');">
                      <img src="../img/arrowLeft.png"/>
                    </td>
                    <%end%>
                  </tr>
                </table>
              </td>
              <td onclick="noshow('', '', '<%=jsEncode(@words[@wordNum])%>');">
                <p><%=@words[@wordNum]%></p>
                <img src="<%=@words[@wordNum+1]%>">
              </td>
              <%@wordNum += 2%>
              <%if @wordNum == @words.length%>
                <%@words[@wordNum] = ""%>
                <%@words[@wordNum+1] = ""%>
              <%end%>
              <td onclick="noshow('', '', '<%=jsEncode(@words[@wordNum])%>');">
                <p><%=@words[@wordNum]%></p>
                <img src="<%=@words[@wordNum+1]%>">
              </td>
              <%@wordNum += 2%>
              <%if @wordNum == @words.length%>
                <%@words[@wordNum] = ""%>
                <%@words[@wordNum+1] = ""%>
              <%end%>
              <td onclick="noshow('', '', '<%=jsEncode(@words[@wordNum])%>');">
                <p><%=@words[@wordNum]%></p>
                <img src="<%=@words[@wordNum+1]%>">
              </td>
              <%@wordNum += 2%>
              <%if @wordNum == @words.length%>
                <%@words[@wordNum] = ""%>
                <%@words[@wordNum+1] = ""%>
              <%end%>
              <td onclick="noshow('', '', '<%=jsEncode(@words[@wordNum])%>');">
                <p><%=@words[@wordNum]%></p>
                <img src="<%=@words[@wordNum+1]%>">
              </td>
              <%@wordNum += 2%>
              <td style="width:5%" class="noSpeak">
                <table class="double-row">
                  <tr>
                    <td class="top" onclick="noshow('', '', '.');">
                      <p>.</p>
                    </td>
                  </tr>
                  <tr style="background: #75FB78">
                    <%if @wordNum == @words.length%>
                      <!-- It's the last table, need to loop back to beginning -->
                    <td class="bottom" onclick="noshow('<%=@idName%>', 'words0', '');">
                      <img src="../img/arrowRight.png"/>
                    </td>
                    <%else%>
                    <td class="bottom" onclick="noshow('<%=@idName%>', '<%=@nextId%>', '');">
                      <img src="../img/arrowRight.png"/>
                    </td>
                    <%end%>
                  </tr>
                </table>
              </td>
            </tr>
            <tr>
              <td colspan="6" style="height:0" onclick="edit('<%=@idName%>', '<%=i%>')">
                <p style="margin:0">Edit Page</p>
              </td>
            </tr>
            
        </table>
        <%@pastId = @idName%>
        <%end%>
        </tr>
        </table>
      </div>
      
      <div class="noshow" id="videoContainer">
        <video autoplay="true" id="videoElement">
    
        </video>
      </div>
      </div>
        
        <div id="message">
          <!-- display message -->
          
          <table class="email" style="margin:0">
            <tr>
              <td style="text-align: left; height:0" class="noSpeak">
                <button class="btn my-btn btn-outline-secondary" onclick="speakMess()">Say</button>
                <button class="btn my-btn btn-outline-secondary" onclick="copyMess()">Copy</button>
                <button class="btn my-btn btn-outline-secondary" onclick="del()">Delete word</button>
                <p id="copied" class="noshow">Copied to Clipboard</p>
                <h4>Message:</h4>
                <h4 id="message2" style="font-size:3rem"></h4>
              </td>
            </tr>
          </table>

          <!-- send message -->
          <div id ="sendForm" class="noshow">
            <br>
            <input type="text" id="messageCopy" style="opacity: 0">
            <form method="POST" action="/send" class="noshow">
              <h3>Choose which contact you want to send the message to:</h3>
              <br>
              <%@contacts.each_with_index do |contact, i|%>
                <input type="radio" name="toEmail" value="<%=@contacts[i][1]%>"><%=@contacts[i][0]%>: <%=@contacts[i][1]%>
                <br><br>
              <%end%>
              <br>
              <input type="hidden" name="id" value="<%=@id%>">
              <input type="hidden" id="messageSend" name="message">
              <input type="submit" class = "btn btn-default" style="border:groove">
            </form>
          </div>

          <!-- Google Custom Search -->
          <!-- <div class="gcse-search" data-defaultToImageSearch="true" data-disableWebSearch="true"></div> -->
        </div>
        
        <!-- edit table -->
        <div id="form" class="noshow email">
          <h3 style="margin-top: 3.5rem">Click choose file in each box to upload a picture for that box</h3>
          <form method="POST" action="/editTableWords" enctype="multipart/form-data">
            <table>
              <tr>
                <td>
                  <textarea name="box0"></textarea>
                  <input type="file" accept=".png, .jpg, .jpeg" name="photo0" id="photo0" onchange="updateImageDisplay(0)">
                  <input type="hidden" name="img0" id="img0">
                  <img id="preview0">
                </td>
                <td>
                  <textarea name="box1"></textarea>
                  <input type="file" accept=".png, .jpg, .jpeg" name="photo1" id="photo1" onchange="updateImageDisplay(1)">
                  <input type="hidden" name="img1" id="img1">
                  <img id="preview1">
                </td>
                <td>
                  <textarea name="box2"></textarea>
                  <input type="file" accept=".png, .jpg, .jpeg" name="photo2" id="photo2" onchange="updateImageDisplay(2)">
                  <input type="hidden" name="img2" id="img2">
                  <img id="preview2">
                </td>
                <td>
                  <textarea name="box3"></textarea>
                  <input type="file" accept=".png, .jpg, .jpeg" name="photo3" id="photo3" onchange="updateImageDisplay(3)">
                  <input type="hidden" name="img3" id="img3">
                  <img id="preview3">
                </td>
              </tr>
              <tr>
                <td>
                  <textarea name="box4"></textarea>
                  <input type="file" accept=".png, .jpg, .jpeg" name="photo4" id="photo4" onchange="updateImageDisplay(4)">
                  <input type="hidden" name="img4" id="img4">
                  <img id="preview4">
                </td>
                <td>
                  <textarea name="box5"></textarea>
                  <input type="file" accept=".png, .jpg, .jpeg" name="photo5" id="photo5" onchange="updateImageDisplay(5)">
                  <input type="hidden" name="img5" id="img5">
                  <img id="preview5">
                </td>
                <td>
                  <textarea name="box6"></textarea>
                  <input type="file" accept=".png, .jpg, .jpeg" name="photo6" id="photo6" onchange="updateImageDisplay(6)">
                  <input type="hidden" name="img6" id="img6">
                  <img id="preview6">
                </td>
                <td>
                  <textarea name="box7"></textarea>
                  <input type="file" accept=".png, .jpg, .jpeg" name="photo7" id="photo7" onchange="updateImageDisplay(7)">
                  <input type="hidden" name="img7" id="img7">
                  <img id="preview7">
                </td>
              </tr>
            </table>
              <!-- <input type="hidden" id="messageSend" name="message"> -->
            <input type="hidden" name="id" value="<%=@id%>">
            <input type="hidden" id="messageEdit" name="message1">
            <input type="hidden" name="tableNum" id="table">
            <input type="submit" class="btn btn-default" style="border:groove; width:auto" name="replace" value="Replace">
            <input type="submit" class="btn btn-default" style="border:groove; width:auto" name="add" value="Add">
            <input type="submit" class="btn btn-default" style="border:groove; width:auto" name="back" value="Back to Template">
          </form>
        </div>
        

          <!-- Image Preview -->
          <script>
              function updateImageDisplay(i) {
                  const input = document.querySelector("#photo" + i)
                  console.log(input)
                  const preview = document.querySelector('#preview' + i);
                  const curFiles = input.files;
                  for(const file of curFiles) {
                      preview.src = URL.createObjectURL(file);
                      var real_src = preview.src
                      document.getElementById("img" + i).value = real_src
                      // console.log(document.getElementById("photo").value)
                  }
              }
          </script>
        

          <script>
              var message = "<%=@message%>";
                document.getElementById("message2").innerHTML=message;
                document.getElementById("messageSend").value=message;
                document.getElementById("messageEdit").value=message;

              function JSEncode(word) {
                var single = word.indexOf('\'');
                var double = word.indexOf('\"');
                while (single != -1) {
                  word = word.slice(0, single) + "\x27" + word(single+1);
                  single = word.indexOf('\'', single+1);
                }
                while (double != -1) {
                  word = word.slice(0, double) + "\x22" + word(double+1);
                  double = word.indexOf('\'', double+1);
                }
                return word;
              }

              function noshow(table1, table2, word) {
                  var addMessage = word;
                  console.log(table2);
                  var id1 = document.getElementById(table1);
                  var id2 = document.getElementById(table2);
                  // var single = addMessage.indexOf('\'');
                  // var double = addMessage.indexOf('\"');
                  console.log(addMessage);
                  // while (single != -1) {
                  //   addMessage = addMessage.slice(0, single) + "\\" + addMessage(single);
                  //   console.log(addMessage);
                  //   single = addMessage.indexOf('\'', single+1);
                  // }
                  // while (double != -1) {
                  //   addMessage = addMessage.slice(0, double) + "\\" + addMessage(double);
                  //   double = addMessage.indexOf('\'', double+1);
                  // }
                  // console.log(addMessage);
                  if (addMessage != '') {
                      message = message + " " + addMessage;
                  }

                  $(id1).addClass('noshow');
                  $(id1).removeClass('show')
                  $(id2).removeClass('noshow');
                  $(id2).addClass('show');
                  document.getElementById("message2").innerHTML=message;
                  document.getElementById("messageSend").value=message;
                  document.getElementById("messageEdit").value=message;
              }

              function del() {
                console.log("Message deleted: " + message)
                var pos = message.lastIndexOf(" ");
                if (pos != -1) {
                  message = message.substring(0, pos);
                }
                document.getElementById("message2").innerHTML=message;
                document.getElementById("messageSend").value=message;
                document.getElementById("messageEdit").value=message;
              }
              
              
              function edit(table, tableNum) {
                var editTable = table
                var tableNum = tableNum
                console.log(editTable)
                var id1 = document.getElementById(editTable);
                var messageId = document.getElementById('message');
                var formId = document.getElementById('form');
                $(id1).addClass('noshow');
                $(id1).removeClass('show')
                $(messageId).addClass('noshow');
                $(formId).removeClass('noshow');
                $(formId).addClass('show');
                if (editTable.includes('questions')) {
                  $(add).addClass('show')
                  $(add).removeClass('noshow')
                }
                document.getElementById("table").value=tableNum;
              }

              function openWords() {
                var id = document.getElementById('words0');
                $(id).addClass('show');
                $(id).removeClass('noshow');

                // openVideo()
              }

              //  Video Stream
              function openVideo() {
                var id = document.getElementById('tables');
                var already = $(id).hasClass('videoTable')
                if (!already) {
                  $(id).addClass('videoTable');
                  var videoCon = document.querySelector('#videoContainer');
                  $(videoCon).removeClass('noshow');
                  var use = document.getElementById('useVid')
                  var stop = document.getElementById('stopVid')
                  $(use).addClass('noshow')
                  $(stop).removeClass('noshow')

                  var video = document.querySelector("#videoElement");
                  var wordTables = document.getElementsByClassName("show email")
                  var dims = wordTables[0].getBoundingClientRect();
                  var vidHeight = dims.height - 20; // 20 is for the border (10 on each side)
                  var vidWidth = dims.width - 20;

                  if (navigator.mediaDevices.getUserMedia) {
                  navigator.mediaDevices.getUserMedia({ video: {width: vidWidth, height: vidHeight} })
                      .then(function (stream) {
                      video.srcObject = stream;
                      })
                      .catch(function (err) {
                      console.log("Something went wrong!");
                      });
                  }
                }
              }

              function stopVideo() {
                var id = document.getElementById('tables');
                $(id).removeClass('videoTable');
                var videoCon = document.querySelector('#videoContainer');
                $(videoCon).addClass('noshow');
                var use = document.getElementById('useVid')
                var stop = document.getElementById('stopVid')
                $(use).removeClass('noshow')
                $(stop).addClass('noshow')

                var video = document.querySelector("#videoElement");
                var stream = video.srcObject;
                if (stream != null) {
                  var tracks = stream.getTracks();
                  for (var i = 0; i < tracks.length; i++) {
                    var track = tracks[i];
                    track.stop();
                  }
                  video.srcObject = null;
                }
              }

              function copyMess() {
                var message = document.getElementById("message2").innerHTML;
                message = message.replace(/<br>/g, " ")
                document.getElementById("messageCopy").value=message;
                message = document.getElementById("messageCopy")
                
                var isiOSDevice = navigator.userAgent.match(/ipad|iphone/i);
	              if (isiOSDevice) {
                  var oldContentEditable = message.contentEditable,
                      oldReadOnly = message.readOnly,
                      range = document.createRange();

                  message.contentEditable = true;
                  message.readOnly = false;
                  range.selectNodeContents(message);

                  var s = window.getSelection();
                  s.removeAllRanges();
                  s.addRange(range);

                  message.setSelectionRange(0, 999999); // A big number, to cover anything that could be inside the element.

                  message.contentEditable = oldContentEditable;
                  message.readOnly = oldReadOnly;
                }
                else{
                  message.select();
                }
                document.execCommand('copy');
                navigator.clipboard.writeText(message.value);

                console.log(message.value);
                var copied = document.getElementById("copied")
                $(copied).removeClass('noshow');
                $(copied).addClass('show');
              }

              // Tutorial
              function nextStep(pastStep) {
                var pastNum = pastStep;
                var nextNum = pastNum + 1;
                var pastId = "step-" + pastNum;
                var nextId = "step-" + (nextNum);
                var past = document.getElementById(pastId);
                var next = document.getElementById(nextId);
                $(past).removeClass("show");
                $(past).addClass("noshow");
                $(next).removeClass("noshow");
                $(next).addClass("show");
                if (pastStep == 1) {
                  var endHighlight = document.getElementById(pastNum);
                  var startHighlight = document.getElementById(nextNum);
                  $(endHighlight).removeClass("highlight");
                  $(startHighlight).addClass("highlight");
                }
              }

              function backStep(currStep) {
                var pastNum = currStep;
                var nextNum = pastNum - 1
                var pastId = "step-" + pastNum;
                var nextId = "step-" + (nextNum);
                var past = document.getElementById(pastId);
                var next = document.getElementById(nextId);
                $(past).removeClass("show");
                $(past).addClass("noshow");
                $(next).removeClass("noshow");
                $(next).addClass("show");
                if (currStep == 2) {
                  var endHighlight = document.getElementById(pastNum);
                  var startHighlight = document.getElementById(nextNum);
                  $(endHighlight).removeClass("highlight");
                  $(startHighlight).addClass("highlight");
                }
              }

              function closeModal(passId) {
                var id = passId;
                var div = document.getElementById(id);
                $(div).addClass("noshow");
                $(div).removeClass("show");
                if (passId == "tut") {
                  var endHighlight = document.getElementById('2');
                  $(endHighlight).removeClass("highlight");
                }
              }
          </script>

    <div id="modal1" class="modal">
      <h4>Speech Synthesis not supported</h4>
      <p>Your browser does not support speech synthesis.</p>
      <p>We recommend you use Google Chrome.</p>
      <div class="action-bar">
        <a href="#" class="waves-effect waves-green btn-flat modal-action modal-close">Close</a>
      </div>
    </div>
    <!-- Footer -->
        <footer class="bg-white small text-center text-black-50">
          <div class="container">
            Copyright &copy; VITAM 2019
          </div>
          </footer>

        
   
    <!-- Bootstrap core JavaScript -->
    <!--<script src="vendor/jquery/jquery.min.js"></script>-->
    <script type="text/script" src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="../vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="../js/grayscale.js"></script>
    
    <!--Audio-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.95.1/js/materialize.min.js"></script>
    <script src="../js/speech.js"></script>
    
    <script>
      function speak(message){
        if ('speechSynthesis' in window) {
            var text = message;
            var msg = new SpeechSynthesisUtterance();
            var voices = window.speechSynthesis.getVoices();
            // console.log(voices);
            // msg.voice = voices[18];
            msg.lang = 'en-US'
            // 48 for Computer,  15-18 for IPad
            msg.text = text;
            console.log(msg)
      
            speechSynthesis.speak(msg);
        } else {
          $('#modal1').openModal();
        }
      };

      function speakMess() {
        var message = document.getElementById("message2").innerHTML;
        console.log(message)
        speak(message);
      }

      $("td").click(function() { 
          if ($(this).attr("class") != "top" && $(this).attr("class") != "bottom" && $(this).attr("class") != "back" && $(this).attr("class") != "noSpeak") {
            speak(jQuery(this).text());
          }
      });
    </script>


  </body>
</html>